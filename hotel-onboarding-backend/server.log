/opt/homebrew/lib/python3.13/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:     Started server process [81342]
INFO:     Waiting for application startup.
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A "HTTP/2 200 OK"
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=id&limit=1 "HTTP/2 200 OK"
✅ Official I9 template found: /Users/gouthamvemula/onbclaude/onbdev/official-forms/i9-form-latest.pdf
✅ Official W4 template found: /Users/gouthamvemula/onbclaude/onbdev/official-forms/w4-form-latest.pdf
⚠️ Scheduler disabled - missing apscheduler module
✅ Supabase-enabled backend started successfully
INFO:     127.0.0.1:54921 - "GET /healthz HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&email=eq.freshhr%40test.com "HTTP/2 200 OK"
INFO:     127.0.0.1:54961 - "POST /auth/login HTTP/1.1" 200 OK
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
INFO:     127.0.0.1:54965 - "GET /api/notifications?limit=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55209 - "GET /health HTTP/1.1" 404 Not Found
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=id&limit=1 "HTTP/2 200 OK"
INFO:     127.0.0.1:55217 - "GET /healthz HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=id&limit=1 "HTTP/2 200 OK"
INFO:     127.0.0.1:55263 - "GET /healthz HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&email=eq.freshhr%40test.com "HTTP/2 200 OK"
INFO:     127.0.0.1:55265 - "POST /auth/login HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&email=eq.testuser%40example.com "HTTP/2 200 OK"
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/property_managers?select=properties%28%2A%29&manager_id=eq.a120ae58-7f72-49e0-ae95-abb209df438e "HTTP/2 200 OK"
INFO:     127.0.0.1:55266 - "POST /auth/login HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:55269 - "GET /api/manager/profile HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55270 - "GET /api/manager/dashboard HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55271 - "GET /api/hr/dashboard HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55272 - "GET /api/manager/applications HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55273 - "GET /api/manager/applications/3a68cf18-7bcc-46fd-b810-ba459bb4feb5 HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55274 - "GET /api/hr/audit-logs HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55275 - "POST /api/manager/preferences HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55276 - "POST /api/analytics/track HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:55277 - "GET /api/hr/report-templates HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55278 - "GET /api/websocket/info HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55280 - "GET /api/websocket/health HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55281 - "POST /api/websocket/broadcast HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55282 - "GET /api/manager/statistics HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55283 - "GET /api/manager/applications/search?status=pending&search=test&limit=10 HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55284 - "POST /api/manager/applications/bulk HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55285 - "GET /api/manager/performance HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55286 - "GET /api/analytics/dashboard HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:55287 - "POST /api/analytics/reports/generate HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55288 - "POST /api/analytics/export HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:55289 - "GET /api/analytics/trends?period=monthly HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:55290 - "POST /api/notifications/send HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55291 - "GET /api/notifications/user HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55292 - "GET /api/notifications/templates HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55293 - "POST /api/notifications/preferences HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:55294 - "POST /api/notifications/broadcast HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:55295 - "GET /api/manager/analytics HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55296 - "POST /api/websocket/notify HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55297 - "GET /api/manager/dashboard/realtime-status HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55298 - "GET /api/manager/dashboard HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55299 - "POST /api/events/application-submitted HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55303 - "GET /docs HTTP/1.1" 200 OK
/opt/homebrew/lib/python3.13/site-packages/fastapi/openapi/utils.py:246: UserWarning: Duplicate Operation ID add_signature_to_i9_api_forms_i9_add_signature_post for function add_signature_to_i9 at /Users/gouthamvemula/onbclaude/onbdev/hotel-onboarding-backend/app/pdf_api.py
  warnings.warn(message, stacklevel=1)
/opt/homebrew/lib/python3.13/site-packages/fastapi/openapi/utils.py:246: UserWarning: Duplicate Operation ID add_signature_to_w4_api_forms_w4_add_signature_post for function add_signature_to_w4 at /Users/gouthamvemula/onbclaude/onbdev/hotel-onboarding-backend/app/pdf_api.py
  warnings.warn(message, stacklevel=1)
/opt/homebrew/lib/python3.13/site-packages/fastapi/openapi/utils.py:246: UserWarning: Duplicate Operation ID get_notifications_api_notifications_get for function get_notifications at /Users/gouthamvemula/onbclaude/onbdev/hotel-onboarding-backend/app/main_enhanced.py
  warnings.warn(message, stacklevel=1)
INFO:     127.0.0.1:55313 - "GET /openapi.json HTTP/1.1" 200 OK
INFO:     127.0.0.1:55326 - "GET /openapi.json HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&email=eq.freshhr%40test.com "HTTP/2 200 OK"
INFO:     127.0.0.1:55363 - "POST /auth/login HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&email=eq.testuser%40example.com "HTTP/2 200 OK"
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/property_managers?select=properties%28%2A%29&manager_id=eq.a120ae58-7f72-49e0-ae95-abb209df438e "HTTP/2 200 OK"
INFO:     127.0.0.1:55389 - "POST /auth/login HTTP/1.1" 403 Forbidden
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&email=eq.freshhr%40test.com "HTTP/2 200 OK"
INFO:     127.0.0.1:55460 - "POST /auth/login HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&email=eq.testuser%40example.com "HTTP/2 200 OK"
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/property_managers?select=properties%28%2A%29&manager_id=eq.a120ae58-7f72-49e0-ae95-abb209df438e "HTTP/2 200 OK"
INFO:     127.0.0.1:55462 - "POST /auth/login HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:55463 - "GET /api/properties HTTP/1.1" 404 Not Found
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/audit_logs?select=%2A&order=timestamp.desc&limit=100&offset=0 "HTTP/2 200 OK"
INFO:     127.0.0.1:55464 - "GET /api/audit-logs HTTP/1.1" 200 OK
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
INFO:     127.0.0.1:55468 - "POST /api/analytics/track HTTP/1.1" 422 Unprocessable Content
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/employees?select=%2A "HTTP/2 200 OK"
INFO:     127.0.0.1:55470 - "GET /api/employees HTTP/1.1" 200 OK
INFO:     127.0.0.1:55472 - "GET /api/ws/connections HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55473 - "GET /api/events HTTP/1.1" 404 Not Found
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
ERROR:app.services.onboarding_orchestrator:Failed to get pending HR approvals: 'EnhancedSupabaseService' object has no attribute 'get_onboarding_sessions_by_status'
INFO:     127.0.0.1:55474 - "GET /api/hr/onboarding/pending HTTP/1.1" 200 OK
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
INFO:     127.0.0.1:55476 - "POST /api/manager/employee-setup HTTP/1.1" 403 Forbidden
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
INFO:     127.0.0.1:55478 - "GET /api/analytics/dashboard HTTP/1.1" 200 OK
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
INFO:     127.0.0.1:55480 - "POST /api/analytics/custom-report HTTP/1.1" 422 Unprocessable Content
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
INFO:     127.0.0.1:55482 - "POST /api/analytics/export HTTP/1.1" 422 Unprocessable Content
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
INFO:     127.0.0.1:55484 - "GET /api/analytics/trends?period=monthly HTTP/1.1" 200 OK
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
INFO:     127.0.0.1:55486 - "GET /api/notifications HTTP/1.1" 200 OK
INFO:     127.0.0.1:55488 - "POST /api/notifications HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:55489 - "GET /api/forms/i9/fields HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55490 - "GET /api/documents HTTP/1.1" 404 Not Found
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
ERROR:app.main_enhanced:Failed to get compliance dashboard: name 'compliance_engine' is not defined
INFO:     127.0.0.1:55491 - "GET /api/compliance/dashboard HTTP/1.1" 500 Internal Server Error
INFO:     127.0.0.1:55525 - "POST /api/hr/create-test-manager HTTP/1.1" 404 Not Found
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&email=eq.freshhr%40test.com "HTTP/2 200 OK"
INFO:     127.0.0.1:55667 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:55671 - "POST /api/properties HTTP/1.1" 404 Not Found
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
ERROR:app.main_enhanced:Failed to get compliance dashboard: name 'compliance_engine' is not defined
INFO:     127.0.0.1:55672 - "GET /api/compliance/dashboard HTTP/1.1" 500 Internal Server Error
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
INFO:     127.0.0.1:55674 - "GET /api/notifications HTTP/1.1" 200 OK
INFO:     127.0.0.1:55677 - "POST /api/notifications HTTP/1.1" 405 Method Not Allowed
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&email=eq.testuser%40example.com "HTTP/2 200 OK"
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/property_managers?select=properties%28%2A%29&manager_id=eq.a120ae58-7f72-49e0-ae95-abb209df438e "HTTP/2 200 OK"
INFO:     127.0.0.1:55678 - "POST /auth/login HTTP/1.1" 403 Forbidden
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
INFO:     127.0.0.1:55679 - "GET /api/analytics/dashboard HTTP/1.1" 200 OK
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/audit_logs?select=%2A&order=timestamp.desc&limit=100&offset=0 "HTTP/2 200 OK"
INFO:     127.0.0.1:55681 - "GET /api/audit-logs HTTP/1.1" 200 OK
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/employees?select=%2A "HTTP/2 200 OK"
INFO:     127.0.0.1:55683 - "GET /api/employees HTTP/1.1" 200 OK
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A&id=eq.7ba78d45-9352-43ec-88a4-aef5614124d7 "HTTP/2 200 OK"
ERROR:app.services.onboarding_orchestrator:Failed to get pending HR approvals: 'EnhancedSupabaseService' object has no attribute 'get_onboarding_sessions_by_status'
INFO:     127.0.0.1:55685 - "GET /api/hr/onboarding/pending HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=id&limit=1 "HTTP/2 200 OK"
INFO:     127.0.0.1:55687 - "GET /healthz HTTP/1.1" 200 OK
