INFO:     Will watch for changes in these directories: ['/Users/gouthamvemula/onbclaude/onbdev/hotel-onboarding-backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [29115] using StatReload
/opt/homebrew/lib/python3.13/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
WARNING:app.supabase_service_enhanced:SUPABASE_SERVICE_KEY not set, using anon key for admin operations
INFO:app.supabase_service_enhanced:✅ Enhanced Supabase service initialized
INFO:     Started server process [29124]
INFO:     Waiting for application startup.
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=%2A "HTTP/2 200 OK"
INFO:     Application startup complete.
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/users?select=id&limit=1 "HTTP/2 200 OK"
✅ Official I9 template found: /Users/gouthamvemula/onbclaude/onbdev/official-forms/i9-form-latest.pdf
✅ Official W4 template found: /Users/gouthamvemula/onbclaude/onbdev/official-forms/w4-form-latest.pdf
✅ Supabase-enabled backend started successfully
INFO:     127.0.0.1:49824 - "GET /healthz HTTP/1.1" 200 OK
INFO:app.i9_ocr_service:Processing document type: I9DocumentType.DRIVERS_LICENSE with Groq Vision API
INFO:httpx:HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.i9_ocr_service:Groq API response: {
  "document_number": "123456789",
  "first_name": "Janice",
  "last_name": "Sample",
  "date_of_birth": "1994-06-01",
  "issue_date": "2024-06-01",
  "expiration_date": "2032-06-01",
  "issuing_authority": "Tennessee",
  "address": "123 Main St, Apt 1, Nashville, TN 37210",
  "class": "M",
  "restrictions": "None",
  "height": "5'-06\"",
  "weight": "",
  "eye_color": "Brown"
}
INFO:     127.0.0.1:54996 - "POST /api/documents/process HTTP/1.1" 200 OK
INFO:app.i9_ocr_service:Processing document type: I9DocumentType.SSN_CARD with Groq Vision API
INFO:httpx:HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.i9_ocr_service:Groq API response: {
  "ssn": "000-00-0000",
  "first_name": "Barry",
  "last_name": "Sousa",
  "issuing_authority": "Social Security Administration"
}
INFO:     127.0.0.1:55029 - "POST /api/documents/process HTTP/1.1" 200 OK
INFO:app.i9_ocr_service:Processing document type: I9DocumentType.DRIVERS_LICENSE with Groq Vision API
INFO:httpx:HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.i9_ocr_service:Groq API response: {
  "document_number": "123456789",
  "first_name": "Janice",
  "last_name": "Sample",
  "date_of_birth": "1994-06-01",
  "issue_date": "2024-06-01",
  "expiration_date": "2032-06-01",
  "issuing_authority": "Tennessee",
  "address": "123 Main St, Apt 1, Nashville, TN 37210",
  "class": "M",
  "restrictions": "None",
  "height": "5'-06\"",
  "weight": "",
  "eye_color": "Brown"
}
INFO:     127.0.0.1:55357 - "POST /api/documents/process HTTP/1.1" 200 OK
INFO:app.i9_ocr_service:Processing document type: I9DocumentType.SSN_CARD with Groq Vision API
INFO:httpx:HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.i9_ocr_service:Groq API response: {
  "ssn": "000-00-0000",
  "first_name": "Barry",
  "last_name": "Sousa",
  "issuing_authority": "Social Security Administration"
}
INFO:     127.0.0.1:55382 - "POST /api/documents/process HTTP/1.1" 200 OK
INFO:app.i9_ocr_service:Processing document type: I9DocumentType.DRIVERS_LICENSE with Groq Vision API
INFO:httpx:HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.i9_ocr_service:Groq API response: {
  "document_number": "123456789",
  "first_name": "Janice",
  "last_name": "Sample",
  "date_of_birth": "1994-06-01",
  "issue_date": "2024-06-01",
  "expiration_date": "2032-06-01",
  "issuing_authority": "Tennessee",
  "address": "123 Main St, Apt 1, Nashville, TN 37210",
  "class": "M",
  "restrictions": "None",
  "height": "5'-06\"",
  "weight": "",
  "eye_color": "Brown"
}
INFO:     127.0.0.1:56261 - "POST /api/documents/process HTTP/1.1" 200 OK
INFO:app.i9_ocr_service:Processing document type: I9DocumentType.SSN_CARD with Groq Vision API
INFO:httpx:HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.i9_ocr_service:Groq API response: {
  "ssn": "000-00-0000",
  "first_name": "Barry",
  "last_name": "Sousa",
  "issuing_authority": "Social Security Administration"
}
INFO:     127.0.0.1:56284 - "POST /api/documents/process HTTP/1.1" 200 OK
INFO:     127.0.0.1:56384 - "OPTIONS /api/onboarding/demo-employee-001/i9-complete HTTP/1.1" 200 OK
INFO:app.main_enhanced:Demo mode: Processing I-9 complete for demo-employee-001
INFO:app.main_enhanced:Demo mode: Simulating save of I-9 complete data
INFO:     127.0.0.1:56384 - "POST /api/onboarding/demo-employee-001/i9-complete HTTP/1.1" 200 OK
INFO:app.i9_ocr_service:Processing document type: I9DocumentType.DRIVERS_LICENSE with Groq Vision API
INFO:httpx:HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.i9_ocr_service:Groq API response: {
  "document_number": "123456789",
  "first_name": "Janice",
  "last_name": "Sample",
  "date_of_birth": "1994-06-01",
  "issue_date": "2024-06-01",
  "expiration_date": "2032-06-01",
  "issuing_authority": "Tennessee",
  "address": "123 Main St, Apt 1, Nashville, TN 37210",
  "class": "M",
  "restrictions": "None",
  "height": "5'-06\"",
  "weight": "",
  "eye_color": "Brown"
}
INFO:     127.0.0.1:56663 - "POST /api/documents/process HTTP/1.1" 200 OK
INFO:app.i9_ocr_service:Processing document type: I9DocumentType.SSN_CARD with Groq Vision API
INFO:httpx:HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.i9_ocr_service:Groq API response: {
  "ssn": "000-00-0000",
  "first_name": "Barry",
  "last_name": "Sousa",
  "issuing_authority": "Social Security Administration"
}
INFO:     127.0.0.1:56686 - "POST /api/documents/process HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/properties?select=%2A&id=eq.demo "HTTP/2 400 Bad Request"
ERROR:app.supabase_service_enhanced:Failed to get property by ID demo: {'message': 'invalid input syntax for type uuid: "demo"', 'code': '22P02', 'hint': None, 'details': None}
INFO:     127.0.0.1:59997 - "GET /properties/demo/info HTTP/1.1" 404 Not Found
INFO:httpx:HTTP Request: GET https://onmjxtyamdpkhnflwwmj.supabase.co/rest/v1/properties?select=%2A&id=eq.demo "HTTP/2 400 Bad Request"
ERROR:app.supabase_service_enhanced:Failed to get property by ID demo: {'message': 'invalid input syntax for type uuid: "demo"', 'code': '22P02', 'hint': None, 'details': None}
INFO:     127.0.0.1:60003 - "GET /properties/demo/info HTTP/1.1" 404 Not Found
